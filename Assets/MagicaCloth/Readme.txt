//------------------------------------------------------------------------------
// Magica Cloth
// Copyright (c) Magica Soft, 2020
// https://magicasoft.jp
//------------------------------------------------------------------------------

■概要
Magica Cloth（マギカ・クロス）はUnity Job System + Burstコンパイラにより動作する高速なクロスシミュレーション（揺れものアセット）です。

■要求Unityバージョン
Unity2018.4.0(LTS)以上


■機能

* Unity Job System + Burstコンパイラによる高速なクロスシミュレーション
* WebGLを除くすべてのプラットフォームで動作可能
* ボーン(Transform)で駆動するBoneClothとメッシュで駆動するMeshClothを装備
* MeshClothはスキニングメッシュでの動作も可能
* 簡単で直感的なインターフェースによりすぐにセットアップ可能
* スローなどの時間操作が可能
* フルソースコード付き


■使い方
オンラインマニュアルとなっていますので、詳しくは次のURLを参照してください。
https://magicasoft.jp/magica-cloth


■更新履歴
[v1.6.1]
改善: 摩擦処理のアルゴリズムを改善しました。パーティクルが振動する問題が低減しました。
修正: エディタにインスペクタウインドウが２つ以上存在する場合に頂点ペイントが正常に行えない問題を修正しました。
修正: エディタでの実行終了時にエラーが発生する問題を修正しました。

[v1.6.0]
改善: ClampPosition / ClampRotationの動作を改善。移動制限よりも衝突判定を優先するようにしました。
改善: 衝突判定処理の改善。
改善: ローテーションラインの生成アルゴリズムを改善しました。
改善: コライダーギズモは基本的に選択していない場合は非表示にしました。
改善: 実行中のクロスインスペクタにシミュレーションのリセットボタンを追加しました。
改善: 摩擦処理のアルゴリズムを改善しました。
改善: RestoreDistanceのNear接続時に、最大接続数を指定できるようにしました。
改善: VirtualDeformerのウエイト算出方式を、参照するスキニングメッシュ頂点の平均ウエイト値に変更。
これによりアニメーション時に本来意図しない頂点が変形する問題が大幅に減少します。
改善: VirtualDeformerの固定頂点は、状況により完全に計算から除外するように設定しました。
これによりアニメーション時に本来意図しない頂点が変形する問題が大幅に減少します。
改善: AdjustLineをRotation Interpolationに名称変更しました。
改善: Rotation InterpolationにFixedNonRotationフラグを追加しました。
このフラグをONにすると固定パーティクルは一切回転しなくなります。
修正: グローバルコライダーが正しく機能していなかった問題を修正

[v1.5.1]
追加: [Distance Disable]パラメータへのアクセスAPIを追加しました。
追加: [External Force]パラメータへのアクセスAPIを追加しました。
改善: 各コンポーネント間の接続制御を強化しました。
修正: 実行中に[Distance Disable]をOn/Offするとエラーが発生する問題を修正しました。
修正: 遅延実行時にLateUpdateでクロスコンポーネントを作成するとエラーが発生する問題を修正しました。
修正: 遅延実行はLateUpdateの最後ではなく、PostLateUpdateで実行するように変更しました。
修正: 非アクティブのレンダーデフォーマが計算処理されていた問題を修正しました。
修正: 非アクティブのレンダーデフォーマがメモリリークを起こしていた問題を修正しました。
修正: クロスモニタの[RenderMeshVertexUsed][VirtualMeshVertexUsed]の数値を正しいものに修正しました。

[v1.5.0]
追加: 遅延実行の機能を追加しました。
改善: パフォーマンスを改善しました。
改善: プロファイラにメッシュへの書き込み時間を表示させました。
改善: レンダーデフォーマの法線／接線再計算を法線のみ、もしくは法線＋接線を選択できるようにしました。
改善: 頂点ペイント中にシーンビューをAlt+マウスドラッグで画面回転できるように設定しました。
修正: ボーンへの書き込み時にスケール計算が間違っていた問題を修正しました。
修正: １つのボーンを複数で参照する場合に、親ボーンへの参照が消失する場合がある問題を修正しました。
修正: テレポートが正しく機能しない場合がある問題を修正しました。
修正: クロスモニターを非表示にしていると、ウインドコンポーネント選択時にエラーが発生する問題を修正しました。
修正: プレハブモードでの編集時にデータが正しく書き込まれない問題を修正しました。
修正: MeshSpringの軸をインスペクタで編集した時に、シーンビューを再描画するように修正しました。
報告: 更新モードの[Once Per Frame]は将来的に廃止予定となりました。

[v1.4.2]
改善: コライダー作成時は親のスケールを自動判断してコライダーのスケールを調整するように変更しました。
修正: Unity2018を使用し、SkinnedMeshRendererとMeshRendererが混在する場合に、メッシュが壊れる問題を修正しました。
修正: カプセルコライダーのギズモが正しく表示されていなかった問題を修正
修正: クロスコンポーネントがアタッチされたフレームに、クロスシミュレーションが実行されていなかった問題を修正

[v1.4.0]
追加: 着せ替え機能を追加しました(Avatar, AvatarParts)
追加: クロスコンポーネントのテレポートは初期設定ではOFFに変更しました。
改善: クロスの移動にともなう振動を低減させました
改善: クロスコンポーネントオブジェクトを作成する時に、親の名前を引き継ぐように設定しました。
修正: アセットバンドルから読み込んだ場合にMeshOptimizeMissmatchエラーが発生する問題を修正しました。
修正: 頂点ペイント時にシーンビューが再描画されない問題を修正しました
修正: クロスコンポーネントの追加／削除を繰り返すと、トランスフォームの書き込みがおかしくなる問題を修正しました。
修正: コライダーはトランスフォームスケールを正しく反映するように修正しました。
修正: メインカメラが存在しない場合にエラーが発生する問題を修正しました。
修正: レンダラーをマルチ選択してRenderDeformerをアタッチすると、データが作成されない問題を修正しました。

[v1.3.0]
追加: 風の機能を追加しました(Wind)
追加: 風のサンプルシーンを追加しました(WindSample)
改善: クロスチームの前処理をC#からJobSystemに書き直しました。

[v1.2.0]
追加: 元の姿勢とのブレンド機能を追加しました(Blend Weight)
追加: 距離によるシミュレーション無効化機能を追加しました(Distance Disable)
追加: 距離無効化機能のサンプルシーンを追加しました(DistanceDisableSample)
改善: クロスモニターにスクロールバーを追加しました
改善: メッシュにUV値が無くともデータを作成できるようになりました
改善: エラー処理を強化しました
修正: スローの再生不具合を修正しました。Time.timeScaleは正しく機能します
修正: プレハブをCtrl+Dで複製した場合にエラーが発生する問題を修正しました
修正: 頂点ペイントを行わずにデータを作成しようとするとエラーが発生する問題を修正しました

[v1.1.0]
追加: Unity2018.4(LTS)に対応しました
改善: エラー内容をエラーコードとともに詳しく表示するようにしました
改善: 頂点ペイントは頂点インデックスではなく頂点ハッシュで記録するようにしました
修正: MagicaPhysicsManagerが２つ以上見つかった場合、後から発見されたものを削除するようにしました

[v1.0.3]
修正: Unity2019.3.0にて編集中にデータへの参照が消失する問題を修正

[v1.0.2]
修正: Macエディタ環境で実行時にエラーが発生する問題を修正

[v1.0.1]
修正: Unity2019.3にてプレハブ書き込み時にエラーが発生する問題を修正

[v1.0.0]
報告: 初期リリース



